<%- include("partials/header.ejs") %>


    <div class="py-5 bg-gradient-blue">

        <div class="container text-light">
            <h1>
                <%= user.username %>'s Profile
            </h1>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h4>Address</h4>
                    <form id="addressForm">
                        <div class="mb-3">
                            <label for="streetAddress" class="form-label">Street Address</label>
                            <input type="text" class="form-control" id="streetAddress" placeholder="123 Main St" disabled>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="city" class="form-label">City</label>
                                <input type="text" class="form-control" id="city" placeholder="New York" disabled>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="state" class="form-label">State</label>
                                <select class="form-select" id="state" disabled>
                                    <option selected>Choose...</option>
                                    <option value="NY">New York</option>
                                    <option value="CA">California</option>
                                    <option value="TX">Texas</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="zip" class="form-label">Zip Code</label>
                                <input type="text" class="form-control" id="zip" placeholder="10001" disabled>
                            </div>
                        </div>
                        <button type="button" class="btn btn-light" id="editAddressButton">Edit</button>
                        <button type="submit" class="btn btn-primary button d-none" id="saveAddressButton">Save</button>
                    </form>
                </div>
                <div class="col-md-6">
                    <h4>Edit Profile</h4>
                    <form action="/edit-profile" method="post">
                        <div class="mb-3">
                            <label for="usernameInput" class="form-label">Username</label>
                            <input type="text" name="username" class="form-control" id="usernameInput"
                                value="<%= user.username %>" disabled>
                        </div>
                        <div class="mb-3">
                            <label for="emailInput" class="form-label">Email</label>
                            <input type="email" name="email" class="form-control" id="emailInput"
                                value="<%= user.email %>" disabled>
                        </div>
                        <button type="button" class="btn btn-light" id="editButton">Edit</button>
                        <button type="submit" class="btn btn-primary button d-none" id="saveButton">Save</button>
                    </form>
                </div>
            </div>

            <hr>

            <ul class="nav justify-content-end">
                <li class="nav-item">
                    <a class="nav-link text-light" href="/transaction">Transactions</a>
                </li>
                <li class="nav-item">
                    <form action="/logout" method="post">
                        <button type="submit" class="nav-link text-light">Logout</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>

    <script>

        const editAddressButton = document.getElementById('editAddressButton');
            const streetAddressInput = document.getElementById('streetAddress');
            const cityInput = document.getElementById('city');
            const stateSelect = document.getElementById('state');
            const zipInput = document.getElementById('zip');
            const saveAddressButton = document.getElementById('saveAddressButton');

            editAddressButton.addEventListener('click', () => {
                streetAddressInput.disabled = false;
                cityInput.disabled = false;
                stateSelect.disabled = false;
                zipInput.disabled = false;
                editAddressButton.classList.add('d-none');
                saveAddressButton.classList.remove('d-none');
            });

        // Enable editing on button click
        const editButton = document.getElementById('editButton');
        const usernameInput = document.getElementById('usernameInput');
        const emailInput = document.getElementById('emailInput');
        const saveButton = document.getElementById('saveButton');

        editButton.addEventListener('click', () => {
            usernameInput.disabled = false;
            emailInput.disabled = false;
            editButton.classList.add('d-none');
            saveButton.classList.remove('d-none');
        });

    </script>

    </body>