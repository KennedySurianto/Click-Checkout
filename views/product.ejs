<%- include("partials/header.ejs") %>

    <div class="container mt-5">

        <div class="row">
            <div class="col m-3 d-flex justify-content-center">
                <img src="<%= product.image_url %>" alt="" class="rounded shadow">
            </div>

            <div class=" col m-3">
                <h3>
                    <%= product.name %>
                </h3>
                <h1>$<%= product.price %>
                </h1>

                <hr>

                <p>
                    <%= product.description %>
                </p>
            </div>

            <div class="col border rounded p-2">
                <div class="d-flex">
                    <div class="btn-group btn-group-sm me-2" role="group" aria-label="...">
                        <button type="button" class="btn btn-sm btn-primary" onclick="mines()">-</button>
                        <input type="number" id="btn-qty" min="1" max="<%= product.stock %>" class="border-primary" value="1">
                        <button type="button" class="btn btn-sm btn-primary" onclick="plus()">+</button>
                    </div>
                    <div class="d-flex">
                        <p><%= product.price %> left!</p>
                    </div>
                </div>
            </div>
        </div>



    </div>

    <script>
        let qty = 1;

        function update() {
            document.getElementById("btn-qty").value = qty;
        }

        function mines() {
            if (qty === 1) return;
            qty--;
            update();
        }

        function plus() {
            qty++;
            update();
        }
    </script>

    <h1>Product: <%= product.name %>
    </h1>
    <p>Description: <%= product.description %>
    </p>
    <p>Stock: <%= product.stock %>
    </p>
    <p>Price: <%= product.price %>
    </p>
    <form action="/add-to-cart" method="post">
        <input type="hidden" name="product_id" value="<%= product.product_id %>">
        <label for="quantity">Quantity</label>
        <input type="number" name="quantity" id="" min="1" max="<%= product.stock %>" value="1" required>
        <button type="submit">Add to cart</button>
    </form>
    </div>